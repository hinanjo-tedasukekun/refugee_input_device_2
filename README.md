# 薄型避難者情報入力端末 Arduino プログラム

避難者情報入力端末に組み込む Arduino プログラムです。バーコードリーダーで避難者の番号を読み取り、以下の情報を登録・更新することができます。こちらは薄型の端末用です。

1. 世帯人数
2. 入退室情報

## コンパイル前に必要な設定

C++11 の機能（初期化リスト、range-based for 等）を使って書いています。そのままコンパイルすると警告が多く出ると思います。そこで、コンパイルオプションに `-std=c++11` を追加します。

* `(Arduino をインストールしたディレクトリ)/hardware/arduino/avr/platform.txt` の中に設定があります。
* `compiler.cpp.flags=` に `-std=c++11` を足します。
* C++11 については、例えば「[More C++11](http://www.slideshare.net/KMC_JP/more-c11)」を参照。

## 接続するピン

| Arduino | ATmega328P | 接続先 |
|--------:|:-----------|:-------|
| 0 | PD0 (2) | XBee RX |
| 1 | PD1 (3) | XBee TX |
| 2 | PD2 (4) | 割り込み制御 |
| 3 | PD3 (5) | （未接続） |
| 4 | PD4 (6) | （未接続） |
| 5 | PD5 (11) | 「−」ボタン |
| 6 | PD6 (12) | 「＋」ボタン |
| 7 | PD7 (13) | 「戻る」ボタン |
| 8 | PB0 (14) | 「次へ」ボタン |
| 9 | PB1 (15) | バーコードリーダー RX |
| 10 | PB2 (16) | バーコードリーダー TX（未接続でよい） |
| 11 | PB3 (17) | ADM3222（RS-232C レベル変換 IC）シャットダウン |
| 12 | PB4 (18) | ADM3222（RS-232C レベル変換 IC）レシーバピン |
| 13 | PB5 (19) | バーコードリーダー電源制御 |
| A0 | PC0 (23) | 送信成功 LED |
| A1 | PC1 (24) | エラー LED |
| A2 | PC2 (25) | （未接続） |
| A3 | PC3 (26) | XBee スリープ制御 |
| A4 | PC4 (27) | LCD I<sup>2</sup>C データ |
| A5 | PC5 (28) | LCD I<sup>2</sup>C クロック |
