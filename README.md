# 入力端末 Arduino プログラム

入力端末に組み込む Arduino プログラム。モードは以下の 3 つ。各モードについて 1 つのクラスを作るようにして、個々のファイルの記述量を減らしました。

1. 代表者番号入力
2. 家族人数入力
3. 送信処理

## コンパイル前に必要な設定

面倒だったので（？）C++11 の機能（初期化リストとか、range-based for とか）を使って書いています。そのままコンパイルすると警告が多く出ると思います。そこで、コンパイルオプションに `-std=c++11` を追加します。

* `$ARUDINO_BIN_DIR/hardware/arduino/avr/platform.txt` の中に設定があります。
* `compiler.cpp.flags=` に `-std=c++11` を足します。
* C++11 の話は、例えば「[More C++11](http://www.slideshare.net/KMC_JP/more-c11)」を参照。

## 接続するピン

| Arduino | ATmega328P | 接続先 |
|--------:|:-----------|:-------|
| 0 | PD0 (2) | XBee RX |
| 1 | PD1 (3) | XBee TX |
| 2 | PD2 (4) | XBee スリープ制御 |
| 3 | PD3 (5) | エラー LED アノード |
| 4 | PD4 (6) | 送信成功 LED アノード |
| 5 | PD5 (11) | 「1人」ボタン |
| 6 | PD6 (12) | 「3人」ボタン |
| 7 | PD7 (13) | 「入室」ボタン |
| 8 | PB0 (14) | 「退室」ボタン |
| 9 | PB1 (15) | 「送信」ボタン |
| 10 | PB2 (16) | 「4人」ボタン |
| 11 | PB3 (17) | 「−」ボタン |
| 12 | PB4 (18) | 「2人」ボタン |
| 13 | PB5 (19) | 「＋」ボタン |
| A0 | PC0 (23) | リセットボタン |
| A1 | PC1 (24) | バーコードリーダー電源制御 |
| A2 | PC2 (25) | バーコードリーダー TX（未接続でよい） |
| A3 | PC3 (26) | バーコードリーダー RX |
| A4 | PC4 (27) | LCD I^2C データ |
| A5 | PC5 (28) | LCD I^2C クロック |
